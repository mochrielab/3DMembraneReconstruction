function [h] = ShowProcess(i,total,h, msg )
%UNTITLED Summary of this function goes here
%   Detailed explanation goes here
if i>total || i<=0
    return;
else
    n=floor(i/total*100);
    if floor((i-1)/total*100)<n
        if isempty(h)
            %%
            scrprop=get(0,'Screensize');
            width=scrprop(3)/5;
            height=scrprop(4)/30;
            pos=[50 50 width height];
            h=figure(...
                'Units', 'points', ...
                'BusyAction', 'queue', ...
                'WindowStyle', 'normal', ...
                'Position', pos, ...
                'Resize','off', ...
                'CreateFcn','', ...
                'NumberTitle','off', ...
                'IntegerHandle','off', ...
                'MenuBar', 'none', ...
                'Tag','TMWWaitbar',...
                'Interruptible', 'off', ...
                'DockControls', 'off', ...
                'Visible','off','Name',msg);
            figure(h);
            axes('Position',[0 0 1 1]);axis off;
            
        end
%         set(0,'Currentfigure',h);
        figure(h);
        rectangle('Position',[0 0 i/total 1],'Curvature',[0,0],...
            'FaceColor','r');
        if i~=total
        rectangle('Position',[i/total,0,1-i/total,1],'Curvature',[0,0],...
            'FaceColor','w');
        else close(h)
        end
    end
end
end

